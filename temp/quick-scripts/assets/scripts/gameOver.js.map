{"version":3,"sources":["gameOver.js"],"names":["Global","require","cc","Class","extends","Component","properties","finalScore","type","Label","default","failedAudioSource","url","AudioClip","onLoad","score","string","scheduleOnce","playDeadAudio","userData","JSON","parse","sys","localStorage","getItem","highestScore","setItem","stringify","audioEngine","play"],"mappings":";;;;;;AAAA,IAAIA,SAAOC,QAAQ,QAAR,CAAX;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACAC,oBAAY;AACRC,kBAAMN,GAAGO,KADD;AAERC,qBAAS;AAFD,SAFJ;AAMR;AACAC,2BAAmB;AACfC,iBAAKV,GAAGW,SADO;AAEfH,qBAAS;AAFM;AAPX,KAHP;;AAgBL;AACAI,YAAQ,kBAAY;AAChB,YAAIC,QAAMf,OAAOe,KAAjB;AACA,aAAKR,UAAL,CAAgBS,MAAhB,GAAuBD,KAAvB;AACA,aAAKE,YAAL,CAAkB,KAAKC,aAAvB,EAAqC,CAArC;AACA;AACA,YAAIC,WAASC,KAAKC,KAAL,CAAWnB,GAAGoB,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,UAA5B,CAAX,CAAb;AACA,YAAGL,SAASM,YAAT,GAAsBV,KAAzB,EAA+B;AAC3BI,qBAASM,YAAT,GAAsBV,KAAtB;AACAb,eAAGoB,GAAH,CAAOC,YAAP,CAAoBG,OAApB,CAA4B,UAA5B,EAAuCN,KAAKO,SAAL,CAAeR,QAAf,CAAvC;AACH;AACJ,KA3BI;;AA6BLD,mBAAc,yBAAW;AACrBhB,WAAG0B,WAAH,CAAeC,IAAf,CAAoB,KAAKlB,iBAAzB,EAA4C,KAA5C,EAAmD,CAAnD;AACH;;AAED;AACA;;AAEA;AApCK,CAAT","file":"gameOver.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["var Global=require(\"global\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        //死亡音效 \n        finalScore: {\n            type: cc.Label,\n            default: null\n        },\n        //死亡音效 \n        failedAudioSource: {\n            url: cc.AudioClip,\n            default: null\n        },\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        var score=Global.score;\n        this.finalScore.string=score;\n        this.scheduleOnce(this.playDeadAudio,1);\n        //判断是不是最高分，如果是则保存\n        var userData=JSON.parse(cc.sys.localStorage.getItem('userData'));\n        if(userData.highestScore<score){\n            userData.highestScore=score;\n            cc.sys.localStorage.setItem('userData',JSON.stringify(userData));\n        }\n    },\n\n    playDeadAudio:function (){\n        cc.audioEngine.play(this.failedAudioSource, false, 1);\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n"]}