{"version":3,"sources":["tutorial.js"],"names":["tutorialIndex","isPlayerStop","tutorialTwoGoals","left","right","cc","Class","extends","Component","properties","player","default","type","Node","floor","floorJump","tutorialText","Label","onLoad","director","preloadScene","log","getPhysicsManager","enabled","manager","getCollisionManager","inputManager","setAccelerometerEnabled","getComponent","isStatusOn","node","on","EventType","TOUCH_START","tutorialProgress","onDeviceMotionEvent","event","scheduleOnce","setPlayerMotion","initMotionNode","string","floorWidth","width","playerWidth","floorX","x","floorY","y","playerX","playerY","distanceFromCenter","Math","sqrt","speed","baseRotateAngle","tutorialOne","tutorialTwo","tutorialThree","tutorialFour","tutorialFive","tutorialSix","tutorialSeven","tutorialFinal","skipTutorial","tutorialString","systemEvent","SystemEvent","DEVICEMOTION","textNode","setPosition","v2","setContentSize","toggleMotionNode","active","getChildByName","playerScript","statusControl","playerComponent","currentFloor","xPosition","rotation","flag","opacity","update","dt","floorJumpWidth","floorJumpX","floorJumpY","userData","highestScore","sys","localStorage","setItem","JSON","stringify","audioEngine","stopAll","loadScene"],"mappings":"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","file":"tutorial.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["var tutorialIndex=1,\n    isPlayerStop=true,\n    tutorialTwoGoals={\n        left:0,\n        right:0,\n    };\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        player:{\n            default:null,\n            type:cc.Node,\n        },\n        floor:{\n            default:null,\n            type:cc.Node,\n        },\n        floorJump:{\n            default:null,\n            type:cc.Node,\n        },\n        tutorialText:{\n            default:null,\n            type:cc.Label,\n        },\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        //预加载游戏开始场景\n        cc.director.preloadScene(\"main\", function () {\n            cc.log(\"Main scene preloaded\");\n        });\n        //开启物理系统\n        cc.director.getPhysicsManager().enabled = true;\n        //开启碰撞系统\n        var manager= cc.director.getCollisionManager();\n        manager.enabled=true;\n        //开启重力感应\n        cc.inputManager.setAccelerometerEnabled(true);\n        //关闭player的状态系统\n        this.player.getComponent(\"player\").isStatusOn=false;\n        //绑定屏幕点击事件\n        this.node.on(cc.Node.EventType.TOUCH_START,this.tutorialProgress,this);\n        //开始教程1\n        this.tutorialProgress();\n    },\n\n    onDeviceMotionEvent:function (event){\n        isPlayerStop&&this.scheduleOnce(this.setPlayerMotion,1);\n        if(tutorialIndex===2){\n            if(tutorialTwoGoals.left>=10&&tutorialTwoGoals.right>=20){\n                this.initMotionNode();\n                this.tutorialText.string=\"complete! Congratulations \\n(tap screen to continue)\";\n                tutorialIndex=3;\n            }else{\n                var floorWidth=this.floor.width,\n                playerWidth=this.player.width,\n                floorX=this.floor.x,\n                floorY=this.floor.y,\n                playerX=this.player.x,\n                playerY=this.player.y,\n                distanceFromCenter=Math.sqrt((playerX-floorX)*(playerX-floorX)+(playerY-floorY)*(playerY-floorY));\n                if(playerX>=floorX){\n                    tutorialTwoGoals.right++;\n                }else{\n                    tutorialTwoGoals.left++;\n                }\n            }\n        }\n    },\n\n    setPlayerMotion:function (){\n        this.player.getComponent(\"player\").speed=2;\n        this.floor.getComponent(\"floor\").baseRotateAngle=15;\n        isPlayerStop=false;\n    },\n\n    tutorialProgress:function (){\n        switch(tutorialIndex){\n            case 1:this.tutorialOne();break;\n            case 2:this.tutorialTwo();break;\n            case 3:this.tutorialThree();break;\n            case 4:this.tutorialFour();break;\n            case 5:this.tutorialFive();break;\n            case 6:this.tutorialSix();break;\n            case 7:this.tutorialSeven();break;\n            case 0:this.tutorialFinal();break;\n            case -1:this.skipTutorial();break;\n            default:this.tutorialOne();break;\n        }\n    },\n\n    tutorialOne:function (){\n        //var tutorialString=\"欢迎来到Idiot游戏！下面我们将引导你进行游戏的基础操作教程（点击屏幕继续）\";\n        var tutorialString=\"Welcome to Idiots! Here we will guide you through the tutorial of game \\n(tap screen to continue)\"\n        this.tutorialText.string=tutorialString;\n        tutorialIndex=2;\n        this.initMotionNode();\n    },\n\n    tutorialTwo:function (){\n        //绑定重力感应事件\n        cc.systemEvent.on(cc.SystemEvent.EventType.DEVICEMOTION, this.onDeviceMotionEvent, this);\n        //var tutorialString=\"现在试着轻轻摇动你的手机来控制人物的左右移动\";\n        var tutorialString=\"Now try to shake your phone gently to control the movement of people around\";\n\n        this.tutorialText.string=tutorialString;\n        var textNode=this.tutorialText.node;\n        textNode.setPosition(cc.v2(this.node.x/5,0));\n        textNode.setContentSize(500,200);\n        this.initMotionNode();\n        this.toggleMotionNode(true);\n        isPlayerStop=true;\n    },\n\n    tutorialThree:function (){\n        this.initMotionNode();\n        //显示需要跳跃到的木板\n        this.floorJump.active=true;\n        //开启角色移动定时器\n        isPlayerStop=true;\n        //this.tutorialText.string=\"快速地摇动你的手机来跳跃到另一块木板上\";\n        this.tutorialText.string=\"Quickly shake your phone to jump to the another wood\";\n        var textNode=this.tutorialText.node;\n        textNode.setPosition(cc.v2(-this.node.x/7,-this.node.y/2));\n    },\n\n    tutorialFour:function (){\n        var textNode=this.tutorialText.node;\n        tutorialIndex=5;\n        this.initMotionNode();\n        this.floorJump.active=false;\n        this.player.getChildByName(\"Status\").active=true;\n        textNode.setPosition(cc.v2(this.node.x/5,0));\n        textNode.setContentSize(500,200);\n        //this.tutorialText.string=\"接下来就是介绍角色的状态啦（点击屏幕继续）\";\n        this.tutorialText.string=\"Then we will introduce the status of the role \\n(tap screen to continue)\";\n    },\n\n    tutorialFive:function (){\n        var playerScript=this.player.getComponent(\"player\");\n        //开启混乱状态\n        playerScript.statusControl(1);\n        //this.tutorialText.string=\"混乱状态：角色将往控制方向相反移动（点击屏幕继续）\";\n        this.tutorialText.string=\"Chaos:The role will move in the opposite direction of control \\n(tap screen to continue)\";\n        tutorialIndex=6;\n    },\n\n    tutorialSix:function (){\n        var playerScript=this.player.getComponent(\"player\");\n        //开启狂暴状态\n        playerScript.statusControl(2);\n        //this.tutorialText.string=\"狂暴状态：角色将移动得更快（点击屏幕继续）\";\n        this.tutorialText.string=\"Rage:The role will move faster \\n(tap screen to continue)\";\n        tutorialIndex=7;\n    },\n\n    tutorialFinal:function (){\n        this.initMotionNode();\n        this.toggleMotionNode();\n        var textNode=this.tutorialText.node;\n        textNode.setPosition(cc.v2(8,9));\n        //this.tutorialText.string=\"哇！完成全部教程了！赶快开始游戏吧（点击屏幕开始游戏）\";\n        this.tutorialText.string=\"Wow! Complete all tutorials! \\n(tap screen to start)\";\n        tutorialIndex=-1;\n    },\n\n    tutorialSeven:function (){\n        this.tutorialText.string=\"you can tap the screen to pause or resume game \\n(tap screen to continue)\";\n        tutorialIndex=0;\n    },\n\n    initMotionNode:function (){\n        var playerComponent=this.player.getComponent(\"player\"),\n            currentFloor=this.floor;\n        if(tutorialIndex!=4){\n            currentFloor=this.floor;\n        }else{\n            currentFloor=this.floorJump;\n        }\n        playerComponent.xPosition=currentFloor.x;\n        this.player.x=currentFloor.x;\n        this.player.y=currentFloor.y;\n        playerComponent.speed=0;\n        currentFloor.rotation=0;\n        currentFloor.getComponent(\"floor\").baseRotateAngle=0;\n    },\n\n    toggleMotionNode:function (flag){\n        if(flag){\n            this.player.opacity=255;\n            this.floor.opacity=255;\n        }else{\n            this.player.opacity=0;\n            this.floor.opacity=0;\n        }\n    },\n    //called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n        if(tutorialIndex===2){\n            var floorWidth=this.floor.width,\n            playerWidth=this.player.width,\n            floorX=this.floor.x,\n            floorY=this.floor.y,\n            playerX=this.player.x,\n            playerY=this.player.y,\n            distanceFromCenter=Math.sqrt((playerX-floorX)*(playerX-floorX)+(playerY-floorY)*(playerY-floorY));\n            if(distanceFromCenter>(floorWidth+playerWidth)/2){\n                //this.tutorialText.string=\"oh!用力过大了，请再试一次（点击屏幕重试）\";\n                this.tutorialText.string=\"Oh!Shaking overly \\n(tap screen to try again)\";\n                tutorialTwoGoals.left=0;\n                tutorialTwoGoals.right=0;\n            }\n        }else if(tutorialIndex===3){\n            var floorJumpWidth=this.floorJump.width,\n                floorJumpX=this.floorJump.x,\n                floorJumpY=this.floorJump.y,\n                playerX=this.player.x,\n                playerY=this.player.y;\n            if((floorJumpY)>playerY&&(floorJumpY-20)<playerY){\n                if(playerX<floorJumpX-floorJumpWidth/2){\n                    this.tutorialText.string=\"Oh!too gently \\n(tap screen to try again)\";\n                }else{\n                    this.tutorialText.string=\"Oh!Shaking overly \\n(tap screen to try again)\";\n                }\n            }\n            if(this.player.getComponent(\"player\").currentFloor===this.floorJump&&playerX>floorJumpX-floorJumpWidth/2\n            &&playerY>=floorJumpY){\n                var textNode=this.tutorialText.node;\n                this.tutorialText.string=\"complete! Congratulations \\n(tap screen to continue)\";\n                tutorialIndex=4;\n                this.initMotionNode();                \n            }\n        }\n    },\n\n    skipTutorial:function (){\n        //初始化用户数据\n        var userData={\n            highestScore:0,\n        };\n        //存入数据库\n        cc.sys.localStorage.setItem('userData', JSON.stringify(userData));\n        //停止所有音效\n        cc.audioEngine.stopAll();\n        cc.director.loadScene(\"main\");\n    },\n});\n"]}